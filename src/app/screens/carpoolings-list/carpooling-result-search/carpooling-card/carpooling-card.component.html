<!-- result list -->
<mat-card
  [ngClass]="{ carpooling: true, 'carpooling-retour': flip == 'active' }"
  [@flipState]="flip"
>
  <ng-container *ngTemplateOutlet="flipTemplate"> </ng-container>
</mat-card>

<ng-template #flipTemplate>
  <div [ngClass]="{ 'tp-box_back': flip == 'active' }">
    <div
      [ngClass]="{ 'tp-box_back': flip == 'active' }"
      *ngIf="current; then contentTemplate"
    ></div>
  </div>
</ng-template>

<ng-template #contentTemplate>
  <!-- Cp Header Infos  -->
  <mat-card-header class="full-width header">
    <div class="row full-width">
      <!-- departure Hour -->
      <mat-checkbox
        class="col-3 text-left departure-hour"
        [(ngModel)]="current.checked"
        (change)="onNotifySelection($event)"
        [disabled]="disabledAction()"
      >
        <strong>{{ current.heureDepart }}</strong>
      </mat-checkbox>
      <!-- End departure Hour -->

      <!-- Route -->
      <div class="col-7 route">
        <app-route-in-line
          [trajet]="current.trajet"
          [allerRetour]="carpooling.retour"
          [isDetail]="false"
        >
        </app-route-in-line>
      </div>
      <!-- End Route -->

      <!-- Price -->
      <div class="col-2  price">{{ current.price }} &euro;</div>
      <!-- End Price -->
    </div>
  </mat-card-header>
  <!-- End Cp Header Infos -->

  <!-- Cp Content -->
  <mat-card-content class="content container">
    <div class="row detail">
      <!-- Driver Infos -->
      <div class="col-3  driver">
        <driver-info [driver]="carpooling.driver"></driver-info>
      </div>

      <!-- Route infos -->
      <div class="col-7 text-left route-infos-container">
        <div class="row route">
          <route-detail
            [trajet]="current.trajet"
            [restrictDesc]="true"
          ></route-detail>
        </div>

        <mat-card-actions class="action">
          <button mat-button *ngIf="carpooling.retour" (click)="toggleFlip()">
            <i class="fa fa-undo" aria-hidden="true"></i>
            Retour mardi Ã  14h30
          </button>
          <button mat-button (click)="onShowDetail()">
            <i class="fa fa-plus" aria-hidden="true"></i>
            Detail
          </button>
          <button mat-button (click)="onShowMap()" class="no-padding">
            <mat-icon>account_circle</mat-icon>
            Map
          </button>
        </mat-card-actions>
      </div>
      <!-- End route infos -->

      <!-- Places -->
      <div class="col-2 no-padding">
        <places-dispo
          [nbPlacesRestantes]="current.nbPlacesRestantes"
        ></places-dispo>
      </div>
    </div>
  </mat-card-content>
  <!-- End Cp Content -->

  <!-- Footer -->
  <mat-card-footer
    *ngIf="current.linkedEvent"
    class="footer small-font border rounded"
  >
    <cov-infos-barre [linkedEvent]="current.linkedEvent"></cov-infos-barre>
  </mat-card-footer>
  <!-- Footer -->
</ng-template>
